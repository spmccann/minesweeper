package main

import (
	"fmt"
	"strconv"

	"github.com/hajimehoshi/ebiten/v2"
	"github.com/hajimehoshi/ebiten/v2/ebitenutil"
)

//var locationClicked [2]int

type input struct {
	locClick               [2]int
	tileClick              [2]int
	mousePreviouslyPressed bool
}

func (i *input) debugMouse(screen *ebiten.Image) {
	ebitenutil.DebugPrint(screen, strconv.FormatBool(ebiten.IsMouseButtonPressed(ebiten.MouseButtonLeft)))
	fmt.Println(ebiten.CursorPosition())
}

func (i *input) positionClick() {
	mousePosX, mousePosY := ebiten.CursorPosition()
	i.locClick[0] = mousePosX
	i.locClick[1] = mousePosY
	i.tileClicked()
}

func (i *input) tileClicked() {
	i.tileClick[0] = (i.locClick[0] - 16) / 16
	i.tileClick[1] = (i.locClick[1] - 16) / 16
}

func (i *input) clickRelease() {
	mousePresssed := ebiten.IsMouseButtonPressed(ebiten.MouseButtonLeft)
	if !mousePresssed && i.mousePreviouslyPressed == true {
		i.positionClick()
	}
	i.mousePreviouslyPressed = mousePresssed
}
